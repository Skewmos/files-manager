{% extends "layout.twig" %}

{% block content %}

  <h1>Uploader un fichier</h1>
  <form class="form-group" id="uploadform" action="" method="post" enctype="multipart/form-data">
    {{ csrf() }}
    <input type="hidden" value="uploadform" name="{{ id_upload }}">
    <input id="file" type="file" name="file" class="file">
    <div class="input-group col-xs-12">
      <input type="text" class="form-control" name="file" disabled placeholder="Votre fichier">
      <span class="input-group-btn">
        <button class="browse btn btn-primary" type="button"><i class="glyphicon glyphicon-file"></i> Choisir un fichier</button>
      </span>
    </div>

    <br>
    <div id="thebar" class="progress progress-striped active">
      <div id="progress-bar" class="progress-bar" style="width: 0%">0%</div>
    </div>

    <span id="alertFile" class="label label-danger"><strong>Fichier trop lourd, veuillez en choisir un autre !</strong></span>

    <button type="submit" id="btnSubmit" class="btn btn-success"><span class="glyphicon glyphicon-open"></span> Uploader</button>
  </form>

  <div class="well">
    <h3 class="text-center">Choses à savoirs</h3>
    <p class="text-center">
      La taille maximale des fichiers autorisés est de {{ mo_size }}Mo.<br>
      Les formats autorisés sont ({{ formats }}).<br>
      Après la fin de l'upload, vous serez rediriger vers votre répertoire personnel.<br>
    </p>
  </div>

  <script type="text/javascript">
    var maxUploadSize = "{{ upload_size }}";
    var redirection = "{{ path_for('home') }}";
    var urlAjax = "{{ path_for('upload_progress') }}";
  </script>
  <script type="text/javascript" src="{{ path_for('home') }}js/upload.min.js"></script>

{% endblock %}
